<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cityseer API Docs</title>
    <meta name="description" content="Computational tools for urban analysis">
    
    
    <link rel="preload" href="/cityseer/assets/css/0.styles.7c391bb3.css" as="style"><link rel="preload" href="/cityseer/assets/js/app.293f2062.js" as="script"><link rel="preload" href="/cityseer/assets/js/2.de39922c.js" as="script"><link rel="preload" href="/cityseer/assets/js/4.f03918b6.js" as="script"><link rel="preload" href="/cityseer/assets/js/13.9adba541.js" as="script"><link rel="preload" href="/cityseer/assets/js/12.df7801a7.js" as="script"><link rel="preload" href="/cityseer/assets/js/11.1a5cc732.js" as="script"><link rel="preload" href="/cityseer/assets/js/10.1c7f8991.js" as="script"><link rel="preload" href="/cityseer/assets/js/14.32a4c4fc.js" as="script"><link rel="prefetch" href="/cityseer/assets/js/15.50a15f1c.js"><link rel="prefetch" href="/cityseer/assets/js/16.0e74828d.js"><link rel="prefetch" href="/cityseer/assets/js/17.855d4d29.js"><link rel="prefetch" href="/cityseer/assets/js/18.db21ef8f.js"><link rel="prefetch" href="/cityseer/assets/js/19.f2bff150.js"><link rel="prefetch" href="/cityseer/assets/js/20.23c51d91.js"><link rel="prefetch" href="/cityseer/assets/js/3.54d9550c.js"><link rel="prefetch" href="/cityseer/assets/js/5.0148d355.js"><link rel="prefetch" href="/cityseer/assets/js/6.970f401b.js"><link rel="prefetch" href="/cityseer/assets/js/7.84941293.js"><link rel="prefetch" href="/cityseer/assets/js/8.c6f533dd.js"><link rel="prefetch" href="/cityseer/assets/js/9.72d8d665.js">
    <link rel="stylesheet" href="/cityseer/assets/css/0.styles.7c391bb3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cityseer/" class="home-link router-link-active"><img src="/cityseer/round_logo.png" alt="Cityseer API Docs" class="logo"> <span class="site-name can-hide">Cityseer API Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cityseer/" class="nav-link">home</a></div><div class="nav-item"><a href="/cityseer/intro.html" class="nav-link">docs</a></div><div class="nav-item"><a href="https://cityseer.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cityseer.io
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/cityseer/cityseer" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cityseer/" class="nav-link">home</a></div><div class="nav-item"><a href="/cityseer/intro.html" class="nav-link">docs</a></div><div class="nav-item"><a href="https://cityseer.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cityseer.io
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/cityseer/cityseer" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cityseer/intro.html" class="sidebar-link">intro</a></li><li><a href="/cityseer/attribution.html" class="sidebar-link">attribution</a></li><li><a href="/cityseer/license.html" class="sidebar-link">license</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cityseer/guide/cleaning.html" class="sidebar-link">graph cleaning</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>cityseer.metrics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cityseer/metrics/layers.html" class="sidebar-link">metrics.layers</a></li><li><a href="/cityseer/metrics/networks.html" class="sidebar-link">metrics.networks</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>cityseer.util</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cityseer/util/graphs.html" class="active sidebar-link">util.graphs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-simple-geoms" class="sidebar-link">nX_simple_geoms</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-from-osm" class="sidebar-link">nX_from_osm</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-wgs-to-utm" class="sidebar-link">nX_wgs_to_utm</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-remove-dangling-nodes" class="sidebar-link">nX_remove_dangling_nodes</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-remove-filler-nodes" class="sidebar-link">nX_remove_filler_nodes</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-consolidate-spatial" class="sidebar-link">nX_consolidate_spatial</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-consolidate-parallel" class="sidebar-link">nX_consolidate_parallel</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-decompose" class="sidebar-link">nX_decompose</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-to-dual" class="sidebar-link">nX_to_dual</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-auto-edge-params" class="sidebar-link">nX_auto_edge_params</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-m-weighted-nodes" class="sidebar-link">nX_m_weighted_nodes</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#graph-maps-from-nx" class="sidebar-link">graph_maps_from_nX</a></li><li class="sidebar-sub-header"><a href="/cityseer/util/graphs.html#nx-from-graph-maps" class="sidebar-link">nX_from_graph_maps</a></li></ul></li><li><a href="/cityseer/util/mock.html" class="sidebar-link">util.mock</a></li><li><a href="/cityseer/util/plot.html" class="sidebar-link">util.plot</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cityseer-util-graphs"><a href="#cityseer-util-graphs" aria-hidden="true" class="header-anchor">#</a> cityseer.util.graphs</h1> <p>A collection of convenience functions for the preparation and conversion of <a href="https://networkx.github.io/" target="_blank" rel="noopener noreferrer"><code>NetworkX</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> graphs to and from <code>cityseer</code> data structures. Note that the <code>cityseer</code> network data structures can be created and manipulated directly, if so desired.</p> <h2 id="nx-simple-geoms"><a href="#nx-simple-geoms" aria-hidden="true" class="header-anchor">#</a> nX_simple_geoms</h2> <div class="sig-style" data-v-be8a829e>nX_simple_geoms(networkX_graph)</div> <p>Generates straight-line geometries for each edge based on the the <code>x</code> and <code>y</code> coordinates of the adjacent nodes. The edge geometry will be stored to the edge <code>geom</code> attribute. The <a href="#nx-auto-edge-params">nX_auto_edge_params</a> function can then be used to auto-generate edge <code>length</code> and <code>impedance</code> attributes.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph with <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>Returns a <code data-v-342b6d4a>networkX</code> graph with <code data-v-342b6d4a>shapely</code> <a href="https://shapely.readthedocs.io/en/latest/manual.html#linestrings" target="_blank" rel="noopener noreferrer" data-v-342b6d4a><code data-v-342b6d4a>Linestring</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-342b6d4a><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> geometries assigned to the edge <code data-v-342b6d4a>geom</code> attributes.</p></div></div> <h2 id="nx-from-osm"><a href="#nx-from-osm" aria-hidden="true" class="header-anchor">#</a> nX_from_osm</h2> <div class="sig-style" data-v-be8a829e>nX_from_osm(osm_json)</div> <p>Generates a <code>NetworkX</code> graph from <a href="https://www.openstreetmap.org" target="_blank" rel="noopener noreferrer"><code>Open Street Map</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> data.</p> <div class="danger custom-block"><p class="custom-block-title">Caution</p> <p>Note that graphs created from OSM data make use of <a href="https://epsg.io/4326" target="_blank" rel="noopener noreferrer">WGS84<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>lng</code>, <code>lat</code> geographic coordinates. Use in combination with <a href="#nx-wgs-to-utm"><code>graphs.nX_wgs_to_utm</code></a> to cast the graph to the local UTM projected coordinate system before subsequent processing.</p></div> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      osm_json
    </div> <div class="elem-type" data-v-342b6d4a>
      str
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>json</code> string response from the <a href="https://wiki.openstreetmap.org/wiki/Overpass_API" target="_blank" rel="noopener noreferrer" data-v-342b6d4a>OSM overpass API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-342b6d4a><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, consisting of <code data-v-342b6d4a>nodes</code> and <code data-v-342b6d4a>ways</code>.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>NetworkX</code> graph with <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> attributes in <a href="https://epsg.io/4326" target="_blank" rel="noopener noreferrer" data-v-342b6d4a>WGS84<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-342b6d4a><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code data-v-342b6d4a>lng</code>, <code data-v-342b6d4a>lat</code> geographic coordinates.</p></div></div> <h2 id="nx-wgs-to-utm"><a href="#nx-wgs-to-utm" aria-hidden="true" class="header-anchor">#</a> nX_wgs_to_utm</h2> <div class="sig-style" data-v-be8a829e>nX_wgs_to_utm(networkX_graph, force_zone_number=None)</div> <p>Converts <code>x</code> and <code>y</code> node attributes from <a href="https://epsg.io/4326" target="_blank" rel="noopener noreferrer">WGS84<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>lng</code>, <code>lat</code> geographic coordinates to the local UTM projected coordinate system. If edge <code>geom</code> attributes are found, the associated <code>LineString</code> geometries will also be converted. The UTM zone derived from the first processed node will be used for the conversion of all other nodes and geometries contained in the graph. This ensures consistent behaviour in cases where a graph spans a UTM boundary.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph with <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes in the WGS84 coordinate system. Optional <code data-v-342b6d4a>geom</code> edge attributes containing <code data-v-342b6d4a>LineString</code> geoms to be converted.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      force_zone_number
    </div> <div class="elem-type" data-v-342b6d4a>
      int
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>An optional UTM zone number for coercing all conversions to an explicit UTM zone. Use with caution: mismatched UTM zones may introduce substantial distortions in the results.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph with <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes converted to the local UTM coordinate system. Edge <code data-v-342b6d4a>geom</code> attributes will also be converted, if found.</p></div></div> <h2 id="nx-remove-dangling-nodes"><a href="#nx-remove-dangling-nodes" aria-hidden="true" class="header-anchor">#</a> nX_remove_dangling_nodes <div class="chip-style">
  v0.8.0
</div></h2> <div class="sig-style" data-v-be8a829e><pre data-v-be8a829e>nX_remove_dangling_nodes(networkX_graph,
                         despine=25,
                         remove_disconnected=True)
</pre></div> <p>Optionally removes short dead-ends or disconnected graph components, which may be prevalent on poor quality network datasets.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph in UTM coordinates, containing <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes, and a <code data-v-342b6d4a>geom</code> edge attribute containing <code data-v-342b6d4a>LineString</code> geoms.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      despine
    </div> <div class="elem-type" data-v-342b6d4a>
      float
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>The maximum cutoff distance for removal of dead-ends. Use <code data-v-342b6d4a>0</code> where no despining should occur.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      remove_disconnected
    </div> <div class="elem-type" data-v-342b6d4a>
      bool
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>Whether to remove disconnected components. If set to <code data-v-342b6d4a>True</code>, only the largest connected component will be returned.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph with disconnected components optionally removed, and dead-ends removed where less than the <code data-v-342b6d4a>despine</code> parameter distance.</p></div></div> <h2 id="nx-remove-filler-nodes"><a href="#nx-remove-filler-nodes" aria-hidden="true" class="header-anchor">#</a> nX_remove_filler_nodes</h2> <div class="sig-style" data-v-be8a829e>nX_remove_filler_nodes(networkX_graph)</div> <p>Removes frivolous nodes where <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="g"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container>: such nodes represent no route-choices other than continuing-on to the next edge. The edges on either side of the deleted nodes will be removed and replaced with a new unified edge, with <code>geom</code> attributes welded together.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph in UTM coordinates, containing <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes, and a <code data-v-342b6d4a>geom</code> edge attribute containing <code data-v-342b6d4a>LineString</code> geoms.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph with nodes of <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="d" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="e" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="g" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="r" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="e" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="e" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n" data-v-342b6d4a><mjx-c c="=" data-v-342b6d4a></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n" data-v-342b6d4a><mjx-c c="2" data-v-342b6d4a></mjx-c></mjx-mn></mjx-math></mjx-container> removed. Adjacent edges will be combined into a single new edge with associated <code data-v-342b6d4a>geom</code> attributes welded together.</p></div></div> <div class="tip custom-block"><p class="custom-block-title">Hint</p> <p>Frivolous nodes may be prevalent in poor quality datasets, or in situations where curved roadways have been represented through the addition of nodes to describe arced geometries. <code>cityseer</code> uses <code>shapely</code> <a href="https://shapely.readthedocs.io/en/latest/manual.html#linestrings" target="_blank" rel="noopener noreferrer"><code>Linestrings</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to accurately describe arbitrary road geometries without the need for filler nodes. Filler nodes can therefore be removed, thus reducing potential side-effects when computing network centralities as a function of varied node intensities.</p></div> <h2 id="nx-consolidate-spatial"><a href="#nx-consolidate-spatial" aria-hidden="true" class="header-anchor">#</a> nX_consolidate_spatial <div class="chip-style">
  v0.8.4
</div></h2> <div class="sig-style" data-v-be8a829e>nX_consolidate_spatial(networkX_graph, buffer_dist=14)</div> <p>Consolidates nearby nodes within a specified spatial buffer distance.</p> <div class="tip custom-block"><p class="custom-block-title">Hint</p> <p>Compare with <a href="#nx-consolidate-parallel"><code>nX_consolidate_parallel</code></a>.</p></div> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph in UTM coordinates, containing <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes, and a <code data-v-342b6d4a>geom</code> edge attribute containing <code data-v-342b6d4a>LineString</code> geoms.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      buffer_dist
    </div> <div class="elem-type" data-v-342b6d4a>
      float
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>The buffer distance to be used for consolidating nearby nodes.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph. Nodes located within the <code data-v-342b6d4a>buffer_dist</code> distance from other nodes will be consolidated into new parent nodes. The coordinates of the parent nodes will be derived from the aggregate centroid of the highest-degree constituent nodes.</p></div></div> <div><img src="/cityseer/assets/img/graph_messy.92ee56ae.png" alt="Example messy graph"> <em> The pre-consolidation OSM street network for Soho, London, with filler nodes removed; dangling nodes removed; and street edges decomposed. © OpenStreetMap contributors. </em> <!----></div> <div><img src="/cityseer/assets/img/graph_clean_spatial.2f57187a.png" alt="Example cleaned graph"> <em> Spatially consolidated OSM street network for Soho, London. Compare with the nX_consolidate_parrallel method, below. © OpenStreetMap contributors. </em> <!----></div> <h2 id="nx-consolidate-parallel"><a href="#nx-consolidate-parallel" aria-hidden="true" class="header-anchor">#</a> nX_consolidate_parallel <div class="chip-style">
  v0.8.7
</div></h2> <div class="sig-style" data-v-be8a829e>nX_consolidate_parallel(networkX_graph, buffer_dist=14)</div> <p>Consolidates nearby nodes within a spatial buffer distance, but only if adjacent nodes are found that are also within the buffer distance from each other. This method targets parallel links and may better preserve overall network topology.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph in UTM coordinates, containing <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes, and a <code data-v-342b6d4a>geom</code> edge attribute containing <code data-v-342b6d4a>LineString</code> geoms.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      buffer_dist
    </div> <div class="elem-type" data-v-342b6d4a>
      float
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>The buffer distance to be used for consolidating nearby nodes.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph. Nodes located within the <code data-v-342b6d4a>buffer_dist</code> distance from other nodes will be consolidated into new parent nodes, but only if each node has respective neighbour nodes within the buffer distance of each other. The coordinates of the parent nodes will be derived from the aggregate centroid of the constituent nodes.</p></div></div> <div><img src="/cityseer/assets/img/graph_messy.92ee56ae.png" alt="Example messy graph"> <em> The pre-consolidation OSM street network for Soho, London, with filler nodes removed; dangling nodes removed; and street edges decomposed. © OpenStreetMap contributors. </em> <!----></div> <div><img src="/cityseer/assets/img/graph_clean_parallel.43579298.png" alt="Example cleaned graph"> <em> Parallel-consolidated OSM street network for Soho, London. Notice that nX_consolidate_parallel better preserves the original street topology as compared to nX_consolidate_spatial. © OpenStreetMap contributors. </em> <!----></div> <h2 id="nx-decompose"><a href="#nx-decompose" aria-hidden="true" class="header-anchor">#</a> nX_decompose</h2> <div class="sig-style" data-v-be8a829e>nX_decompose(networkX_graph, decompose_max)</div> <p>Decomposes a graph so that no edge is longer than a set maximum. Decomposition provides a more granular representation of potential variations along street lengths, while reducing network centrality side-effects that arise as a consequence of varied node densities.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph in UTM coordinates, containing <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes, and a <code data-v-342b6d4a>geom</code> edge attribute containing <code data-v-342b6d4a>LineString</code> geoms. Optional <code data-v-342b6d4a>live</code> node attributes.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      decompose_max
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>The maximum length threshold for decomposed edges.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A decomposed <code data-v-342b6d4a>networkX</code> graph with no edge longer than the <code data-v-342b6d4a>decompose_max</code> parameter. If <code data-v-342b6d4a>live</code> node attributes were provided, then the <code data-v-342b6d4a>live</code> attribute for child-nodes will be set to <code data-v-342b6d4a>True</code> if either or both parent nodes were <code data-v-342b6d4a>live</code>. Otherwise, all nodes wil be set to <code data-v-342b6d4a>live=True</code>. The <code data-v-342b6d4a>length</code> and <code data-v-342b6d4a>impedance</code> edge attributes will be set to match the lengths of the new edges.</p></div></div> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>util <span class="token keyword">import</span> mock<span class="token punctuation">,</span> graphs

G <span class="token operator">=</span> mock<span class="token punctuation">.</span>mock_graph<span class="token punctuation">(</span><span class="token punctuation">)</span>
G_simple <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_simple_geoms<span class="token punctuation">(</span>G<span class="token punctuation">)</span>
G_decomposed <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_decompose<span class="token punctuation">(</span>G_simple<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/cityseer/assets/img/graph_simple.6753b640.png" alt="Example graph" class="left"><img src="/cityseer/assets/img/graph_decomposed.a5904e61.png" alt="Example decomposed graph" class="right"></p> <p><em>Simple graph (left) and the equivalent <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container> decomposed graph (right).</em></p> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>Setting the <code>decompose</code> parameter too small in relation to the size of the graph may increase the computation time unnecessarily for subsequent analysis. For larger-scale urban analysis, it is generally not necessary to go smaller <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container>, and <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="5"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container> may already be sufficient for the majority of cases.</p></div> <div class="tip custom-block"><p class="custom-block-title">Hint</p> <p>This function will automatically orient the <code>geom</code> attribute LineStrings in the correct direction before splitting into sub-geometries; i.e. there is no need to order the geometry's coordinates in a particular direction.</p></div> <h2 id="nx-to-dual"><a href="#nx-to-dual" aria-hidden="true" class="header-anchor">#</a> nX_to_dual</h2> <div class="sig-style" data-v-be8a829e>nX_to_dual(networkX_graph)</div> <p>Converts a primal graph representation, where intersections are represented as nodes and streets as edges, to the dual representation, such that edges are converted to nodes and intersections become edges. This is necessary for the computation of simplest-path (angular) metrics. Primal edge <code>geom</code> attributes will be welded to adjacent edges and split into the new dual edge <code>geom</code> attributes, from which the <code>length</code> and <code>impedance</code> attributes will be set. The angular impedances will be calculated by summing the angular change over the length of the geometry.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph in UTM coordinates, containing <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes, and a <code data-v-342b6d4a>geom</code> edge attribute containing <code data-v-342b6d4a>LineString</code> geoms. Optional <code data-v-342b6d4a>live</code> node attributes.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A dual representation <code data-v-342b6d4a>networkX</code> graph. The new dual nodes will have <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes corresponding to the mid-points of the original primal edges.</p> <p data-v-342b6d4a>If <code data-v-342b6d4a>live</code> node attributes were provided, then the <code data-v-342b6d4a>live</code> attribute for the new dual nodes will be set to <code data-v-342b6d4a>True</code> if either or both of the adjacent primal nodes were set to <code data-v-342b6d4a>live=True</code>. Otherwise, all dual nodes wil be set to <code data-v-342b6d4a>live=True</code>.</p> <p data-v-342b6d4a>The primal <code data-v-342b6d4a>geom</code> edge attributes will be split and welded to form the new dual <code data-v-342b6d4a>geom</code> edge attributes, from which the <code data-v-342b6d4a>length</code> and angular <code data-v-342b6d4a>impedance</code> edge attributes will be set. A <code data-v-342b6d4a>parent_primal_node</code> edge attribute will be added, corresponding to the node identifier of the primal graph.</p></div></div> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>util <span class="token keyword">import</span> mock<span class="token punctuation">,</span> graphs

G <span class="token operator">=</span> mock<span class="token punctuation">.</span>mock_graph<span class="token punctuation">(</span><span class="token punctuation">)</span>
G_simple <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_simple_geoms<span class="token punctuation">(</span>G<span class="token punctuation">)</span>
G_dual <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_to_dual<span class="token punctuation">(</span>G_simple<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><img src="/cityseer/assets/img/graph_dual.cc46a320.png" alt="Example dual graph" class="centre" style="max-height:450px;"> <p><em>Dual graph (blue) overlaid on the source primal graph (red). Edge <code>length</code> and angular <code>impedance</code> attributes are set automatically from the <code>geom</code> attribute's length and total angular change.</em></p> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>Shortest-path centralities decompose more gracefully than angular-based simplest-path centralities for pedestrian walking distances, at which scale they also demonstrate stronger correlations to mixed-uses.</p></div> <div class="tip custom-block"><p class="custom-block-title">Hint</p> <p>This function will automatically orient the <code>geom</code> attribute LineStrings in the correct direction when splitting and welding; i.e. there is no need to order the geometry's coordinates in a particular direction.</p></div> <h2 id="nx-auto-edge-params"><a href="#nx-auto-edge-params" aria-hidden="true" class="header-anchor">#</a> nX_auto_edge_params</h2> <div class="sig-style" data-v-be8a829e>nX_auto_edge_params(networkX_graph)</div> <p>Generates edge <code>length</code> and <code>impedance</code> attributes from the <code>geom</code> edge attribute.</p> <div class="danger custom-block"><p class="custom-block-title">Caution</p> <p>Do not use this function on dual graphs. Dual graphs prepared with <a href="#nx-to-dual">nX_to_dual</a> will already have <code>length</code> and <code>impedance</code> edge attributes set, and calling this function would consequently overwrite the angular impedance attributes. It is also not necessary to call this method on decomposed graphs, because <a href="#nx-decompose">nX_decompose</a> will set the <code>length</code> and <code>impedance</code> attributes as part of the process of decomposition.</p></div> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph in UTM coordinates, containing <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes, and a <code data-v-342b6d4a>geom</code> edge attribute containing <code data-v-342b6d4a>LineString</code> geoms.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>Returns a <code data-v-342b6d4a>NetworkX</code> graph with added <code data-v-342b6d4a>length</code> and <code data-v-342b6d4a>impedance</code> edge attributes. Both <code data-v-342b6d4a>length</code> and <code data-v-342b6d4a>impedance</code> will be set to the length of the street edge in metres, as deduced from the <code data-v-342b6d4a>Linestring</code> geometry.</p></div></div> <h2 id="nx-m-weighted-nodes"><a href="#nx-m-weighted-nodes" aria-hidden="true" class="header-anchor">#</a> nX_m_weighted_nodes</h2> <div class="sig-style" data-v-be8a829e>nX_m_weighted_nodes(networkX_graph)</div> <p>Adds a <code>weight</code> node attribute and sets the value to the aggregate half-lengths of the adjacent street edges. Subsequent centrality computations will be weighted accordingly.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph in UTM coordinates, containing <code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes, and a <code data-v-342b6d4a>geom</code> edge attribute containing <code data-v-342b6d4a>LineString</code> geoms.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>Returns a <code data-v-342b6d4a>NetworkX</code> graph with an added <code data-v-342b6d4a>weight</code> node attribute, which will be set to the aggregate half-lengths of adjacent street edges.</p></div></div> <div class="tip custom-block"><p class="custom-block-title">Hint</p> <p>Certain centrality calculations can be weighted by street-lengths, which helps to mitigate undesirable side-effects arising as a function of varied node densities due to the topological representation of the graph. That said, weighted nodes achieve a similar effect to graph decomposition, which is generally preferable because it offers a more granular representation of edges, thereby accommodating variations in intensities along street-fronts.</p></div> <h2 id="graph-maps-from-nx"><a href="#graph-maps-from-nx" aria-hidden="true" class="header-anchor">#</a> graph_maps_from_nX</h2> <div class="sig-style" data-v-be8a829e>graph_maps_from_nX(networkX_graph)</div> <p>Transposes a <code>networkX</code> graph into <code>numpy</code> arrays for use by <code>Network_Layer</code> classes.</p> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>It is generally not necessary to use this function directly. This function will be called internally when invoking <a href="/cityseer/metrics/networks.html#network-layer-from-nx">Network_Layer_From_nX</a></p></div> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph in UTM coordinates.</p> <p data-v-342b6d4a><code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes are required. The <code data-v-342b6d4a>weight</code> node attribute is optional, and a default of <code data-v-342b6d4a>1</code> will be used if not present. The <code data-v-342b6d4a>live</code> node attribute is optional, but recommended. See <a href="#network-layer" data-v-342b6d4a><code data-v-342b6d4a>Network_Layer</code></a> for more information about what these attributes represent.</p> <p data-v-342b6d4a><code data-v-342b6d4a>length</code> and <code data-v-342b6d4a>impedance</code> edge attributes are required. See <a href="#network-layer" data-v-342b6d4a><code data-v-342b6d4a>Network_Layer</code></a> for more information about what these attributes represent.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      node_uids
    </div> <div class="elem-type" data-v-342b6d4a>
      tuple
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A tuple of node <code data-v-342b6d4a>uids</code> corresponding to the node identifiers in the source <code data-v-342b6d4a>networkX</code> graph.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      node_map
    </div> <div class="elem-type" data-v-342b6d4a>
      np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A 2d <code data-v-342b6d4a>numpy</code> array representing the graph's nodes. The indices of the second dimension correspond as follows:</p> <table data-v-342b6d4a><thead data-v-342b6d4a><tr data-v-342b6d4a><th data-v-342b6d4a>idx</th> <th style="text-align:left;" data-v-342b6d4a>property</th></tr></thead> <tbody data-v-342b6d4a><tr data-v-342b6d4a><td data-v-342b6d4a>0</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>x</code> coordinate</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>1</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>y</code> coordinate</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>2</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>bool</code> describing whether the node is <code data-v-342b6d4a>live</code></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>3</td> <td style="text-align:left;" data-v-342b6d4a>start <code data-v-342b6d4a>idx</code> for the corresponding edge map</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>4</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>weight</code> applied to the node</td></tr></tbody></table></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      edge_map
    </div> <div class="elem-type" data-v-342b6d4a>
      np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A 2d <code data-v-342b6d4a>numpy</code> array representing the graph's edges. The indices of the second dimension correspond as follows:</p> <table data-v-342b6d4a><thead data-v-342b6d4a><tr data-v-342b6d4a><th data-v-342b6d4a>idx</th> <th style="text-align:left;" data-v-342b6d4a>property</th></tr></thead> <tbody data-v-342b6d4a><tr data-v-342b6d4a><td data-v-342b6d4a>0</td> <td style="text-align:left;" data-v-342b6d4a>start node <code data-v-342b6d4a>idx</code></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>1</td> <td style="text-align:left;" data-v-342b6d4a>end node <code data-v-342b6d4a>idx</code></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>2</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>length</code> in metres</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>3</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>impedance</code> for shortest path calculations</td></tr></tbody></table></div></div> <h2 id="nx-from-graph-maps"><a href="#nx-from-graph-maps" aria-hidden="true" class="header-anchor">#</a> nX_from_graph_maps</h2> <div class="sig-style" data-v-be8a829e><pre data-v-be8a829e>nX_from_graph_maps(node_uids,
                   node_map,
                   edge_map,
                   networkX_graph=None,
                   metrics_dict=None)
</pre></div> <p>Transposes <code>cityseer</code> graph maps into a <code>networkX</code> graph.</p> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>It is generally not necessary to use this function directly. This function will be called internally when invoking <a href="/cityseer/metrics/networks.html#to-networkX">Network_Layer.to_networkX</a></p></div> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      node_uids
    </div> <div class="elem-type" data-v-342b6d4a>
      tuple
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A tuple of node ids corresponding to the node identifiers for the target <code data-v-342b6d4a>networkX</code> graph.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      node_map
    </div> <div class="elem-type" data-v-342b6d4a>
      np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A 2d <code data-v-342b6d4a>numpy</code> array representing the graph's nodes. The indices of the second dimension should correspond as follows:</p> <table data-v-342b6d4a><thead data-v-342b6d4a><tr data-v-342b6d4a><th data-v-342b6d4a>idx</th> <th style="text-align:left;" data-v-342b6d4a>property</th></tr></thead> <tbody data-v-342b6d4a><tr data-v-342b6d4a><td data-v-342b6d4a>0</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>x</code> coordinate</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>1</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>y</code> coordinate</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>2</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>bool</code> describing whether the node is <code data-v-342b6d4a>live</code></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>3</td> <td style="text-align:left;" data-v-342b6d4a>start <code data-v-342b6d4a>idx</code> for the corresponding edge map</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>4</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>weight</code> applied to the node</td></tr></tbody></table></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      edge_map
    </div> <div class="elem-type" data-v-342b6d4a>
      np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A 2d <code data-v-342b6d4a>numpy</code> array representing the graph's edges. The indices of the second dimension should correspond as follows:</p> <table data-v-342b6d4a><thead data-v-342b6d4a><tr data-v-342b6d4a><th data-v-342b6d4a>idx</th> <th style="text-align:left;" data-v-342b6d4a>property</th></tr></thead> <tbody data-v-342b6d4a><tr data-v-342b6d4a><td data-v-342b6d4a>0</td> <td style="text-align:left;" data-v-342b6d4a>start node <code data-v-342b6d4a>idx</code></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>1</td> <td style="text-align:left;" data-v-342b6d4a>end node <code data-v-342b6d4a>idx</code></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>2</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>length</code> in metres</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>3</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>impedance</code> for shortest path calculations</td></tr></tbody></table></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>An optional <code data-v-342b6d4a>networkX</code> graph to use as a backbone for unpacking the data. The number of nodes and edges should correspond to the <code data-v-342b6d4a>cityseer</code> data maps and the node identifiers should correspond to the <code data-v-342b6d4a>node_uids</code>. If not provided, then a new <code data-v-342b6d4a>networkX</code> graph will be returned. This function is intended to be used for situations where <code data-v-342b6d4a>cityseer</code> data is being transposed back to a source <code data-v-342b6d4a>networkX</code> graph.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      metrics_dict
    </div> <div class="elem-type" data-v-342b6d4a>
      dict
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>An optional dictionary with keys corresponding to the identifiers in <code data-v-342b6d4a>node_uids</code>. The dictionary's <code data-v-342b6d4a>values</code> will be unpacked to the corresponding nodes in the <code data-v-342b6d4a>networkX</code> graph.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph. If a backbone graph was provided, a copy of the same graph will be returned with the data overridden as described below. If no graph was provided, then a new graph will be generated.</p> <p data-v-342b6d4a><code data-v-342b6d4a>x</code>, <code data-v-342b6d4a>y</code>, <code data-v-342b6d4a>live</code>, <code data-v-342b6d4a>weight</code> node attributes will be copied from the <code data-v-342b6d4a>node_map</code> to the graph nodes. <code data-v-342b6d4a>length</code> and <code data-v-342b6d4a>impedance</code> attributes will be copied from the <code data-v-342b6d4a>edge_map</code> to the graph edges.</p> <p data-v-342b6d4a>If a <code data-v-342b6d4a>metrics_dict</code> is provided, all data will be copied to the graph nodes based on matching node identifiers.</p></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/30/2019, 11:17:44 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/cityseer/metrics/networks.html" class="prev">
          metrics.networks
        </a></span> <span class="next"><a href="/cityseer/util/mock.html">
          util.mock
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/cityseer/assets/js/app.293f2062.js" defer></script><script src="/cityseer/assets/js/2.de39922c.js" defer></script><script src="/cityseer/assets/js/4.f03918b6.js" defer></script><script src="/cityseer/assets/js/13.9adba541.js" defer></script><script src="/cityseer/assets/js/12.df7801a7.js" defer></script><script src="/cityseer/assets/js/11.1a5cc732.js" defer></script><script src="/cityseer/assets/js/10.1c7f8991.js" defer></script><script src="/cityseer/assets/js/14.32a4c4fc.js" defer></script>
  </body>
</html>
